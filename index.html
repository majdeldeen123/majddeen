<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>استديو مجد الدين للتصميم المعماري</title>
  <style>
    :root{
      --bg:#111213;
      --surface:#1f1f20;
      --muted:#9d9d9d;
      --accent:#d07c52; /* Terracotta from your logo */
      --accent-2:#bda9a0; /* Taupe from your logo */
      --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, "Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color: #f4f4f4}

    /* Header */
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;background:linear-gradient(180deg, rgba(0,0,0,0.25), transparent)}
    .brand{display:flex;align-items:center;gap:14px}
    .brand img{height:64px;width:auto;display:block}
    .brand h1{font-size:20px;margin:0;color:var(--accent);letter-spacing:1px}

    nav{display:flex;gap:18px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;font-size:1rem;padding:8px;border-radius:8px}
    nav a:hover{color:var(--accent);background:rgba(208,124,82,0.06)}

    .controls{display:flex;align-items:center;gap:12px}
    .btn{
      background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:var(--muted);cursor:pointer;font-weight:600
    }
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;color:#111}

    /* Hero */
    .hero{
      min-height:62vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:48px 18px;position:relative;
      background-color:#0f1112; /* fallback */
      background-image:radial-gradient(rgba(0,0,0,0.35),rgba(0,0,0,0.6));
    }
    .hero .content{max-width:1100px}
    .hero h2{font-size:2.6rem;margin:0 0 12px;color:var(--accent)}
    .hero p{color:var(--muted);font-size:1.05rem;margin:0}

    /* Grid sections */
    .section{padding:56px 6%;}
    .grid{display:grid;gap:20px}
    .services-grid{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:22px;border-radius:var(--radius);border:1px solid rgba(255,255,255,0.03)}
    .card h3{margin:0 0 8px;color:var(--accent)}
    .card p{margin:0;color:var(--muted)}

    /* Footer */
    footer{padding:28px 6%;background:transparent;color:var(--muted);text-align:center}

    /* Small responsive tweaks */
    @media (max-width:720px){
      .hero h2{font-size:1.8rem}
      nav{display:none}
    }

    /* Status / Toast */
    #status{position:fixed;left:16px;bottom:16px;background:rgba(0,0,0,0.6);padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <!-- use the provided images (the environment may map them automatically). We provide two fallbacks. -->
      <picture>
        <source srcset="MAJD-LOGO-3.png" />
        <img src="LOGO.png" alt="شعار مجد الدين" />
      </picture>
      <h1>استديو مجد الدين</h1>
    </div>

    <nav aria-label="قائمة التنقل">
      <a href="#">الرئيسية</a>
      <a href="#services">الخدمات</a>
      <a href="#projects">المشاريع</a>
      <a href="#contact">تواصل</a>
    </nav>

    <div class="controls">
      <!-- Note: this button does NOT auto-connect. It performs a user-initiated check/request only. -->
      <button id="connectWalletBtn" class="btn">اتصال بالمحفظة</button>
      <button class="btn primary" onclick="location.href='#contact'">اطلب عرضًا</button>
    </div>
  </header>

  <main>
    <section class="hero" role="banner" aria-labelledby="hero-heading">
      <div class="content">
        <h2 id="hero-heading">تصميم معماري بمعايير حداثية — هوية واحترافية</h2>
        <p>نحو مساحات تُحاكي متطلبات الحياة المعاصرة وتُبرز الحس المعماري بخطوط واضحة ومواد مُنتقاة.</p>
      </div>
    </section>

    <section id="services" class="section" aria-labelledby="services-heading">
      <h2 id="services-heading" style="color:var(--accent)">خدماتنا</h2>
      <div class="grid services-grid">
        <article class="card">
          <h3>التصميم المعماري</h3>
          <p>مخططات تنفيذية، نماذج ثلاثية الأبعاد، وخبرة في تصميم الفلل، الأبنية السكنية والتجارية.</p>
        </article>
        <article class="card">
          <h3>التصميم الداخلي</h3>
          <p>حلول ذكية للمساحات الداخلية توازن بين الجمال والوظيفة.</p>
        </article>
        <article class="card">
          <h3>إدارة المشاريع والإشراف</h3>
          <p>متابعة تنفيذية دقيقة وضمان جودة في كل مرحلة.</p>
        </article>
      </div>
    </section>

    <section id="projects" class="section" aria-labelledby="projects-heading">
      <h2 id="projects-heading" style="color:var(--accent)">نماذج مشاريع مختارة</h2>
      <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px">
        <div class="card" style="min-height:160px;display:flex;align-items:end;justify-content:flex-end;background-image:linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.45));">
          <div>
            <h3>مجمع سكني حديث</h3>
            <p style="color:var(--muted)">تصميم يعيد تعريف الاستخدام الذكي للمساحات.</p>
          </div>
        </div>
        <div class="card" style="min-height:160px;display:flex;align-items:end;justify-content:flex-end;">
          <div>
            <h3>فيلا ريفية</h3>
            <p style="color:var(--muted)">اندماج المواد الطبيعية مع لمسات تصميمية معاصرة.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="contact" class="section" aria-labelledby="contact-heading">
      <h2 id="contact-heading" style="color:var(--accent)">تواصل معنا</h2>
      <div class="grid" style="grid-template-columns:1fr 320px;gap:22px;align-items:start">
        <form class="card" onsubmit="event.preventDefault(); alert('تم استلام طلبك — سيتم التواصل قريبًا');">
          <label style="display:block;margin-bottom:8px;color:var(--muted)">الاسم</label>
          <input type="text" required style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;margin-bottom:12px" />
          <label style="display:block;margin-bottom:8px;color:var(--muted)">البريد الإلكتروني</label>
          <input type="email" required style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;margin-bottom:12px" />
          <label style="display:block;margin-bottom:8px;color:var(--muted)">موجز الطلب</label>
          <textarea required rows="5" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;margin-bottom:12px"></textarea>
          <button type="submit" class="btn primary">إرسال</button>
        </form>

        <aside class="card">
          <h3>بيانات الاتصال</h3>
          <p style="color:var(--muted)">البريد: info@majddeen.studio<br/>الهاتف: +966 5X XXX XXXX<br/>الموقع: الرياض، المملكة العربية السعودية</p>
          <div style="margin-top:12px"><strong style="color:var(--accent)">ملاحظة تقنية:</strong>
            <p style="color:var(--muted);margin:8px 0 0;font-size:13px">إذا كنت ترى رسالة "Failed to connect to MetaMask" عند تشغيل هذا الملف، فهذا يعني أنّ المحاولات للاتصال بامتداد MetaMask تمت تلقائيًا من مكان آخر أو من سكربت آخر في بيئتك. هذا القالب لا يحاول الاتصال تلقائيًا؛ يجب الضغط على زر "اتصال بالمحفظة" لبدء العملية بشكل تفاعلي وآمن.</p>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2025 استديو مجد الدين للتصميم المعماري — كل الحقوق محفوظة</p>
  </footer>

  <div id="status" aria-live="polite">جاهز</div>

  <script>
    // --- IMPORTANT ---
    // This script deliberately DOES NOT auto-connect to MetaMask or any wallet on load.
    // Many "Failed to connect to MetaMask" errors are caused by auto-connection attempts
    // in sandboxed or restricted environments. We only attempt to connect when the user
    // clicks the "connectWalletBtn" button.

    const statusEl = document.getElementById('status');
    const connectBtn = document.getElementById('connectWalletBtn');

    function setStatus(msg){
      statusEl.textContent = msg;
      console.debug('[STATUS]', msg);
    }

    function isMetaMaskAvailable(){
      try{
        return typeof window !== 'undefined' && !!window.ethereum && !!window.ethereum.isMetaMask;
      }catch(e){
        return false;
      }
    }

    // On load we only detect presence; we DO NOT request accounts.
    window.addEventListener('load', ()=>{
      if(isMetaMaskAvailable()){
        setStatus('MetaMask متوفر — انقر "اتصال بالمحفظة" لتسجيل الدخول');
      } else {
        setStatus('MetaMask غير مثبت أو غير متاح في هذا المتصفح');
      }
    });

    // User-initiated connect (safe): wrapped in try/catch and never called automatically.
    async function connectWallet(){
      if(!isMetaMaskAvailable()){
        alert('MetaMask غير مثبت أو غير متاح. الرجاء تثبيته أو استخدام متصفح يدعمه.');
        return;
      }

      setStatus('طلب الإتصال بالمحفظة — يرجى الموافقة في نافذة MetaMask');
      try{
        // Request accounts from MetaMask. This MUST be done from user interaction (button click).
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        if(Array.isArray(accounts) && accounts.length>0){
          setStatus('متصل بالمحفظة: ' + accounts[0]);
          connectBtn.textContent = 'تم الاتصال';
          connectBtn.disabled = true;
        } else {
          setStatus('لم يتم إرجاع حسابات من MetaMask');
        }
      }catch(err){
        // Handle and display the error gracefully. Many environments will throw here
        // if MetaMask is not reachable from the sandbox.
        console.error('خطأ عند محاولة الاتصال بمحفظة MetaMask:', err);
        setStatus('فشل الاتصال بالمحفظة — تحقق من ملحق MetaMask أو سجلات الكونسول');
        // Provide a readable message for known common cases
        if(err && err.code === 4001){
          // EIP-1193 userRejectedRequest
          alert('لقد رفضت طلب الاتصال من MetaMask. حاول مرة أخرى إن رغبت.');
        } else {
          // Generic fallback
          alert('تعذر الاتصال بالمحفظة. راجع الكونسول لمزيد من التفاصيل.');
        }
      }
    }

    connectBtn.addEventListener('click', connectWallet);

    // For debugging in sandboxed environments: expose helper on window
    window.__majdDebug = { isMetaMaskAvailable };
  </script>
</body>
</html>
